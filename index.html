<!DOCTYPE html>
<html>
<head>
  <title>My Shows CRUD Application</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    h1 {
      text-align: center;
    }
    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    input[type="text"], select {
      margin-bottom: 10px;
      width: 300px;
      padding: 5px;
    }
    button {
      padding: 10px 20px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
  </style>
</head>
<body>
  <h1>My Shows CRUD Application</h1>
  <form id="showForm">
    <input type="text" id="titleInput" placeholder="Title" required>
    <input type="text" id="directorInput" placeholder="Director">
    <select id="typeSelect" required>
      <option value="">Select Type</option>
      <option value="TV Show">TV Show</option>
      <option value="Movie">Movie</option>
    </select>
    <label><input type="checkbox" id="animeCheckbox"> Anime</label>
    <input type="text" id="genreInput" placeholder="Genre">
    <button type="submit">Add Show</button>
  </form>
  <table id="showTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Director</th>
        <th>Type</th>
        <th>Anime</th>
        <th>Genre</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const showForm = document.getElementById('showForm');
    const titleInput = document.getElementById('titleInput');
    const directorInput = document.getElementById('directorInput');
    const typeSelect = document.getElementById('typeSelect');
    const animeCheckbox = document.getElementById('animeCheckbox');
    const genreInput = document.getElementById('genreInput');
    const showTable = document.getElementById('showTable').getElementsByTagName('tbody')[0];

    // Function to fetch shows from the backend and update the table
    function fetchShows() {
      fetch('/shows')
        .then(response => response.json())
        .then(data => {
          showTable.innerHTML = '';
          data.forEach(show => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${show.id}</td>
              <td>${show.title}</td>
              <td>${show.director || ''}</td>
              <td>${show.type}</td>
              <td>${show.anime ? 'Yes' : 'No'}</td>
              <td>${show.genre || ''}</td>
              <td>
                <button onclick="editShow(${show.id})">Edit</button>
                <button onclick="deleteShow(${show.id})">Delete</button>
              </td>
            `;
            showTable.appendChild(row);
          });
        });
    }

// Function to add a new show
function addShow(event) {
  event.preventDefault();
  const showData = {
    title: titleInput.value,
    director: directorInput.value,
    type: typeSelect.value,
    anime: animeCheckbox.checked,
    genre: genreInput.value
  };

  fetch('/shows', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(showData)
  })
  .then(response => response.json())
  .then(data => {
    console.log(data);
    titleInput.value = '';
    directorInput.value = '';
    typeSelect.value = '';
    animeCheckbox.checked = false;
    genreInput.value = '';
    fetchShows();
  })
  .catch(error => console.error('Error:', error));
}

// Function to edit a show
function editShow(showId) {
  // Implement the code to edit a show
  // You can make a PUT request to the appropriate endpoint ("/shows/<showId>") to update the show data
}

// Function to delete a show
function deleteShow(showId) {
  fetch(`/shows/${showId}`, {
    method: 'DELETE'
  })
  .then(response => response.json())
  .then(data => {
    console.log(data);
    fetchShows();
  })
  .catch(error => console.error('Error:', error));
}

// Event listener for the form submit event
showForm.addEventListener('submit', addShow);

// Fetch shows on page load
fetchShows();
</script>
</body>
</html>